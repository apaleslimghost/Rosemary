<main></main>

<script type="importmap">
	{
		"imports": {
			"!/": "https://cdn.skypack.dev/"
		}
	}
</script>

<script type="module">
	import { render, html, useState, useEffect } from '!/htm/preact/standalone'
	import useLocalStorage from './lib/use-local-storage.js'
	import { z } from '!/zod@3.18'

	const StateSchema = z.object({
		count: z.number()
	})

	function App() {
		const [count, setCount] = useLocalStorage('count', StateSchema, {count: 13.7})

		return html`
			<button onClick=${() => setCount(c => ({ count: c.count + 1 }))}>${count.count}</button>
		`
	}

	render(html`<${App} />`, document.querySelector('main'))
</script>
